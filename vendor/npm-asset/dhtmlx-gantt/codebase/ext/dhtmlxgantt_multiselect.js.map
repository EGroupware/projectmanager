{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap","webpack:///./sources/ext/multiselect.js"],"names":["root","factory","exports","module","define","amd","a","i","window","installedModules","__webpack_require__","moduleId","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","gantt","config","multiselect","multiselect_one_level","_multiselect","_selected","_one_level","_active","_first_selected_when_shift","getDefaultSelected","selected","this","getSelected","length","setFirstSelected","id","getFirstSelected","isActive","updateState","active","reset","setLastSelected","$data","tasksStore","silent","store","select","unselect","getLastSelected","last","getSelectedId","isTaskExists","e","callEvent","afterSelect","toggle","isSelected","res","push","sort","b","getGlobalTaskIndex","forSelected","callback","isSameLevel","calculateTaskLevel","getTask","refreshTask","doSelection","_is_icon_open_click","target_ev","locate","defaultLast","isLast","shiftKey","ctrlKey","metaKey","first_indx","target_indx","last_indx","tmp","getNext","getPrev","old_selectTask","selectTask","old_unselectTask","unselectTask","toggleTaskSelection","getSelectedTasks","eachSelectedTask","isSelectedTask","getLastSelectedTask","attachEvent","new_id","item","task_id","state"],"mappings":"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","file":"ext/dhtmlxgantt_multiselect.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse {\n\t\tvar a = factory();\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/codebase/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 217);\n","gantt.config.multiselect = true;\r\ngantt.config.multiselect_one_level = false;\r\n\r\ngantt._multiselect = {\r\n\t_selected: {},\r\n\t_one_level: false,\r\n\t_active: true,\r\n\t_first_selected_when_shift: null,\r\n\tgetDefaultSelected: function() {\r\n\t\tvar selected = this.getSelected();\r\n\t\treturn selected.length ? selected[selected.length - 1] : null;\r\n\t},\r\n\tsetFirstSelected: function(id) {\r\n\t\tthis._first_selected_when_shift = id;\r\n\t},\r\n\tgetFirstSelected: function() {\r\n\t\treturn this._first_selected_when_shift;\r\n\t},\r\n\tisActive: function() {\r\n\t\tthis.updateState();\r\n\t\treturn this._active;\r\n\t},\r\n\tupdateState: function() {\r\n\t\tthis._one_level = gantt.config.multiselect_one_level;\r\n\t\tvar active = this._active;\r\n\t\tthis._active = gantt.config.multiselect;\r\n\t\tif (this._active != active) {\r\n\t\t\tthis.reset();\r\n\t\t}\r\n\t},\r\n\treset: function () {\r\n\t\tthis._selected = {};\r\n\t},\r\n\tsetLastSelected: function (id) {\r\n\t\tgantt.$data.tasksStore.silent(function(){\r\n\t\t\tvar store = gantt.$data.tasksStore;\r\n\t\t\tif (id)\r\n\t\t\t\tstore.select(id+\"\");\r\n\t\t\telse\r\n\t\t\t\tstore.unselect(null);\r\n\t\t});\r\n\t},\r\n\tgetLastSelected: function () {\r\n\t\tvar last = gantt.$data.tasksStore.getSelectedId();\r\n\t\tif (last && gantt.isTaskExists(last))\r\n\t\t\treturn last;\r\n\t\treturn null;\r\n\t},\r\n\tselect: function (id, e) {\r\n\t\tif (id && gantt.callEvent(\"onBeforeTaskMultiSelect\", [id, true, e]) && gantt.callEvent(\"onBeforeTaskSelected\", [id])) {\r\n\t\t\tthis._selected[id] = true;\r\n\t\t\tthis.setLastSelected(id);\r\n\t\t\tthis.afterSelect(id);\r\n\t\t\tgantt.callEvent(\"onTaskMultiSelect\", [id, true, e]);\r\n\t\t\tgantt.callEvent(\"onTaskSelected\", [id]);\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\treturn false;\r\n\t},\r\n\ttoggle: function (id, e) {\r\n\t\tif (this._selected[id]) {\r\n\t\t\tthis.unselect(id, e);\r\n\t\t} else {\r\n\t\t\tthis.select(id, e);\r\n\t\t}\r\n\t},\r\n\tunselect: function (id, e) {\r\n\t\tif (id && gantt.callEvent(\"onBeforeTaskMultiSelect\", [id, false, e])) {\r\n\t\t\tthis._selected[id] = false;\r\n\t\t\tif (this.getLastSelected() == id)\r\n\t\t\t\tthis.setLastSelected(this.getDefaultSelected());\r\n\t\t\tthis.afterSelect(id);\r\n\t\t\tgantt.callEvent(\"onTaskMultiSelect\", [id, false, e]);\r\n\t\t\tgantt.callEvent(\"onTaskUnselected\", [id]);\r\n\t\t}\r\n\t},\r\n\tisSelected: function (id) {\r\n\t\treturn !!(gantt.isTaskExists(id) && this._selected[id]);\r\n\t},\r\n\tgetSelected: function () {\r\n\t\tvar res = [];\r\n\t\tfor (var i in this._selected) {\r\n\t\t\tif (this._selected[i] && gantt.isTaskExists(i)) {\r\n\t\t\t\tres.push(i);\r\n\t\t\t} else {\r\n\t\t\t\tthis._selected[i] = false;\r\n\t\t\t}\r\n\t\t}\r\n\t\tres.sort(function(a, b) {\r\n\t\t\treturn gantt.getGlobalTaskIndex(a) > gantt.getGlobalTaskIndex(b) ? 1 : -1;\r\n\t\t});\r\n\t\treturn res;\r\n\t},\r\n\tforSelected: function (callback) {\r\n\t\tvar selected = this.getSelected();\r\n\t\tfor (var i = 0; i < selected.length; i++) {\r\n\t\t\tcallback(selected[i]);\r\n\t\t}\r\n\t},\r\n\tisSameLevel: function(id) {\r\n\t\tif (!this._one_level)\r\n\t\t\treturn true;\r\n\t\tvar last = this.getLastSelected();\r\n\t\tif (!last)\r\n\t\t\treturn true;\r\n\t\tif (!(gantt.isTaskExists(last) && gantt.isTaskExists(id)))\r\n\t\t\treturn true;\r\n\t\treturn !!(gantt.calculateTaskLevel(gantt.getTask(last)) == gantt.calculateTaskLevel(gantt.getTask(id)));\r\n\t},\r\n\tafterSelect: function(id) {\r\n\t\tif (gantt.isTaskExists(id))\r\n\t\t\tgantt.refreshTask(id);\r\n\t},\r\n\tdoSelection: function(e) {\r\n\t\tif (!this.isActive())\r\n\t\t\treturn false;\r\n\r\n\t\t// deny selection when click on 'expand' or 'collapse' icons\r\n\t\tif (gantt._is_icon_open_click(e))\r\n\t\t\treturn false;\r\n\r\n\t\tvar target_ev = gantt.locate(e);\r\n\t\tif (!target_ev)\r\n\t\t\treturn false;\r\n\r\n\t\tif (!gantt.callEvent(\"onBeforeMultiSelect\", [e]))\r\n\t\t\treturn false;\r\n\r\n\t\tvar selected = this.getSelected();\r\n\t\tvar defaultLast = this.getFirstSelected();\r\n\t\tvar isLast = false;\r\n\t\tvar last = this.getLastSelected();\r\n\r\n\t\tif (e.shiftKey) {\r\n\t\t\tif (!gantt.isTaskExists(this.getFirstSelected()) || this.getFirstSelected() === null) {\r\n\t\t\t\tthis.setFirstSelected(target_ev);\r\n\t\t\t}\r\n\t\t} else if (e.ctrlKey || e.metaKey) {\r\n\t\t\tif (!this.isSelected(target_ev))\r\n\t\t\t\tthis.setFirstSelected(target_ev);\r\n\t\t} else {\r\n\t\t\tthis.setFirstSelected(target_ev);\r\n\t\t}\r\n\t\tif (e.ctrlKey || e.metaKey) {\r\n\t\t\tif (target_ev) {\r\n\t\t\t\tthis.toggle(target_ev, e);\r\n\t\t\t}\r\n\t\t} else if (e.shiftKey && selected.length) {\r\n\t\t\tif (!last)\r\n\t\t\t\tlast = target_ev;\r\n\t\t\telse if (target_ev) {\r\n\t\t\t\tvar first_indx = gantt.getGlobalTaskIndex(this.getFirstSelected());\r\n\t\t\t\tvar target_indx = gantt.getGlobalTaskIndex(target_ev);\r\n\t\t\t\tvar last_indx = gantt.getGlobalTaskIndex(last);\r\n\r\n\t\t\t\t// clear prev selection\r\n\t\t\t\tvar tmp = last;\r\n\t\t\t\twhile (gantt.getGlobalTaskIndex(tmp) !== first_indx) {\r\n\t\t\t\t\tthis.unselect(tmp, e);\r\n\t\t\t\t\ttmp = (first_indx > last_indx) ? gantt.getNext(tmp) : gantt.getPrev(tmp);\r\n\t\t\t\t}\r\n\t\t\t\ttmp = target_ev;\r\n\t\t\t\twhile (gantt.getGlobalTaskIndex(tmp) !== first_indx) {\r\n\t\t\t\t\tif (this.select(tmp, e) && !isLast) {\r\n\t\t\t\t\t\tisLast = true;\r\n\t\t\t\t\t\tdefaultLast = tmp;\r\n\t\t\t\t\t}\r\n\t\t\t\t\ttmp = (first_indx > target_indx) ? gantt.getNext(tmp) : gantt.getPrev(tmp);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} else { // no key press when mouse click\r\n\t\t\tif (!this.isSelected(target_ev)) {\r\n\t\t\t\tthis.select(target_ev, e);\r\n\t\t\t}\r\n\t\t\tselected = this.getSelected();\r\n\t\t\tfor (var i=0; i<selected.length; i++) {\r\n\t\t\t\tif (selected[i] !== target_ev) {\r\n\t\t\t\t\tthis.unselect(selected[i], e);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (this.isSelected(target_ev)) {\r\n\t\t\tthis.setLastSelected(target_ev);\r\n\t\t} else if (defaultLast) {\r\n\t\t\tif (target_ev == last)\r\n\t\t\t\tthis.setLastSelected(e.shiftKey ? defaultLast : this.getDefaultSelected());\r\n\t\t} else {\r\n\t\t\tthis.setLastSelected(null);\r\n\t\t}\r\n\r\n\t\tif (!this.getSelected().length)\r\n\t\t\tthis.setLastSelected(null);\r\n\r\n\t\tif (!this.getLastSelected() || !this.isSelected(this.getFirstSelected()))\r\n\t\t\tthis.setFirstSelected(this.getLastSelected());\r\n\r\n\t\treturn true;\r\n\t}\r\n};\r\n\r\n(function(){\r\n\tvar old_selectTask = gantt.selectTask;\r\n\tgantt.selectTask = function(id) {\r\n\t\tif (!id)\r\n\t\t\treturn false;\r\n\t\tvar multiselect = gantt._multiselect;\r\n\t\tvar res = id;\r\n\t\tif (multiselect.isActive()) {\r\n\t\t\tif (multiselect.select(id, null)) {\r\n\t\t\t\tmultiselect.setLastSelected(id);\r\n\t\t\t}\r\n\t\t\tmultiselect.setFirstSelected(multiselect.getLastSelected());\r\n\t\t} else {\r\n\t\t\tres = old_selectTask.call(this, id);\r\n\t\t}\r\n\t\treturn res;\r\n\t};\r\n\r\n\tvar old_unselectTask = gantt.unselectTask;\r\n\tgantt.unselectTask = function(id) {\r\n\t\tvar multiselect = gantt._multiselect;\r\n\t\tvar isActive = multiselect.isActive();\r\n\t\tid = id || multiselect.getLastSelected();\r\n\t\tif(id && isActive) {\r\n\t\t\tmultiselect.unselect(id, null);\r\n\t\t\tif (id == multiselect.getLastSelected())\r\n\t\t\t\tmultiselect.setLastSelected(null);\r\n\t\t\tgantt.refreshTask(id);\r\n\t\t\tmultiselect.setFirstSelected(multiselect.getLastSelected());\r\n\t\t}\r\n\t\tvar res = id;\r\n\t\tif (!isActive)\r\n\t\t\tres = old_unselectTask.call(this, id);\r\n\t\treturn res;\r\n\t};\r\n\r\n\tgantt.toggleTaskSelection = function(id) {\r\n\t\tvar multiselect = gantt._multiselect;\r\n\t\tif (id && multiselect.isActive()) {\r\n\t\t\tmultiselect.toggle(id);\r\n\t\t\tmultiselect.setFirstSelected(multiselect.getLastSelected());\r\n\t\t}\r\n\t};\r\n\tgantt.getSelectedTasks = function() {\r\n\t\tvar multiselect = gantt._multiselect;\r\n\t\tmultiselect.isActive();\r\n\t\treturn multiselect.getSelected();\r\n\t};\r\n\tgantt.eachSelectedTask = function(callback){\r\n\t\treturn this._multiselect.forSelected(callback);\r\n\t};\r\n\tgantt.isSelectedTask = function(id){\r\n\t\treturn this._multiselect.isSelected(id);\r\n\t};\r\n\tgantt.getLastSelectedTask = function(){\r\n\t\treturn this._multiselect.getLastSelected();\r\n\t};\r\n\tgantt.attachEvent(\"onGanttReady\", function(){\r\n\t\tgantt.$data.tasksStore.isSelected = function(id){\r\n\t\t\treturn gantt._multiselect.isSelected(id);\r\n\t\t};\r\n\t});\r\n})();\r\n\r\ngantt.attachEvent(\"onTaskIdChange\", function (id, new_id) {\r\n\tvar multiselect = gantt._multiselect;\r\n\tif (!multiselect.isActive())\r\n\t\treturn true;\r\n\tif (gantt.isSelectedTask(id)) {\r\n\t\tmultiselect.unselect(id, null);\r\n\t\tmultiselect.select(new_id, null);\r\n\t}\r\n});\r\n\r\ngantt.attachEvent(\"onAfterTaskDelete\", function (id, item) {\r\n\tvar multiselect = gantt._multiselect;\r\n\tif (!multiselect.isActive())\r\n\t\treturn true;\r\n\r\n\tif (multiselect._selected[id]) {\r\n\t\tmultiselect.unselect(id, null);\r\n\t\tmultiselect._selected[id] = false;\r\n\t\tmultiselect.setLastSelected(multiselect.getDefaultSelected());\r\n\t}\r\n\r\n\tmultiselect.forSelected(function (task_id) {\r\n\t\tif (!gantt.isTaskExists(task_id))\r\n\t\t\tmultiselect.unselect(task_id, null);\r\n\t});\r\n});\r\n\r\ngantt.attachEvent(\"onBeforeTaskMultiSelect\", function(id, state, e){\r\n\tvar multiselect = gantt._multiselect;\r\n\tif (state && multiselect.isActive()) {\r\n\t\tif (multiselect._one_level) {\r\n\t\t\treturn multiselect.isSameLevel(id);\r\n\t\t}\r\n\t}\r\n\treturn true;\r\n});\r\n\r\ngantt.attachEvent(\"onTaskClick\", function(id, e) {\r\n\tif (gantt._multiselect.doSelection(e))\r\n\t\tgantt.callEvent(\"onMultiSelect\", [e]);\r\n\treturn true;\r\n});"],"sourceRoot":""}