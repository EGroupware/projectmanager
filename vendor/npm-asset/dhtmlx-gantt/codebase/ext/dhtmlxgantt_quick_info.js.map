{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap","webpack:///./sources/ext/quick_info.js"],"names":["root","factory","exports","module","define","amd","a","i","window","installedModules","__webpack_require__","moduleId","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","getContainer","container","gantt","$task_data","offsetHeight","offsetWidth","parent","viewport","$task","$grid_data","$grid","$layout","config","quickinfo_buttons","quick_info_detached","show_quick_info","attachEvent","id","setTimeout","showQuickInfo","events","hiding_function","_hideQuickInfo","length","clearQuickInfo","hideQuickInfo","_quick_info_box","templates","quick_info_title","start","end","ev","text","substr","quick_info_content","details","quick_info_date","task_time","quick_info_class","task","this","_quick_info_box_id","utils","dom","isChildOf","document","body","pos","_get_event_counter_part","_init_quick_info","_quick_info_task","className","_prepare_quick_info_classname","_fill_quick_data","_show_quick_info","callEvent","forced","qi","taskId","parentNode","removeChild","style","right","left","event","e","keyCode","offset","nodeName","toLowerCase","appendChild","width","height","scrolls","getScrollState","screenWidth","x","Math","min","max","dx","top","dy","$root","getTask","css","template","start_date","end_date","_quick_info_readonly","isReadonly","createElement","_waiAria","quickInfoAttr","html","ariaAttr","quickInfoHeaderAttrString","buttons","is_editor","icon_delete","icon_edit","quickInfoButtonAttrString","locale","labels","innerHTML","_qi_button_click","target","srcElement","code","which","node","box","mask","indexOf","$click","split","replace","domEv","getTaskNode","getTaskRowNode","offsetTop","offsetLeft","offsetParent","scroll","$container","y","header","content","date","titleContent","firstChild","nextSibling","quickInfoHeader","join"],"mappings":"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","file":"ext/dhtmlxgantt_quick_info.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse {\n\t\tvar a = factory();\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/codebase/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 216);\n","gantt.config.quickinfo_buttons = [\"icon_delete\",\"icon_edit\"];\r\ngantt.config.quick_info_detached = true;\r\ngantt.config.show_quick_info = true;\r\n\r\ngantt.attachEvent(\"onTaskClick\", function(id){\r\n\tsetTimeout(function() {\r\n\t\tgantt.showQuickInfo(id);\r\n\t}, 0);\r\n\r\n\treturn true;\r\n});\r\n\r\n(function(){\r\n\tvar events = [\"onEmptyClick\", \"onViewChange\", \"onLightbox\", \"onBeforeTaskDelete\", \"onBeforeDrag\"];\r\n\tvar hiding_function = function(){\r\n\t\tgantt._hideQuickInfo();\r\n\t\treturn true;\r\n\t};\r\n\tfor (var i=0; i<events.length; i++)\r\n\t\tgantt.attachEvent(events[i], hiding_function);\r\n})();\r\n\r\n(function () {\r\n\tfunction clearQuickInfo() {\r\n\t\tgantt.hideQuickInfo(true);\r\n\t\tgantt._quick_info_box = null;\r\n\t\treturn true;\r\n\t}\r\n\tgantt.attachEvent(\"onGanttReady\", clearQuickInfo);\r\n\tgantt.attachEvent(\"onDestroy\", clearQuickInfo);\r\n})();\r\n\r\ngantt.templates.quick_info_title = function(start, end, ev){ return ev.text.substr(0,50); };\r\ngantt.templates.quick_info_content = function(start, end, ev){ return ev.details || ev.text; };\r\ngantt.templates.quick_info_date = function(start, end, ev){\r\n\t\treturn gantt.templates.task_time(start, end, ev);\r\n};\r\ngantt.templates.quick_info_class = function(start, end, task){ return \"\"; };\r\n\r\n\r\ngantt.showQuickInfo = function(id){\r\n\tif ((\r\n\t\tid == this._quick_info_box_id &&\r\n\t\tgantt.utils.dom.isChildOf(this._quick_info_box, document.body)\r\n\t) || !this.config.show_quick_info) {\r\n\t\t// not show if the quick info is already displayed for this task, or if it shouldn't be displayed\r\n\t\treturn;\r\n\t}\r\n\tthis.hideQuickInfo(true);\r\n\tvar offset = 6; // offset TASK <> QI-BOX in 'px'\r\n\tvar container = getContainer();\r\n\tvar pos = this._get_event_counter_part(id, offset, container.viewport);\r\n\r\n\tif (pos){\r\n\t\tthis._quick_info_box = this._init_quick_info(pos, id);\r\n\t\tthis._quick_info_task = id;\r\n\t\tthis._quick_info_box.className = gantt._prepare_quick_info_classname(id);\r\n\r\n\t\tthis._fill_quick_data(id);\r\n\t\tthis._show_quick_info(pos, offset);\r\n\t\tthis.callEvent(\"onQuickInfo\", [id]);\r\n\t}\r\n};\r\ngantt._hideQuickInfo = function(){\r\n\tgantt.hideQuickInfo();\r\n};\r\ngantt.hideQuickInfo = function(forced){\r\n\tvar qi = this._quick_info_box;\r\n\tthis._quick_info_box_id = 0;\r\n\tvar taskId = this._quick_info_task;\r\n\tthis._quick_info_task = null;\r\n\r\n\tif (qi && qi.parentNode){\r\n\r\n\t\tif (gantt.config.quick_info_detached) {\r\n\t\t\tthis.callEvent(\"onAfterQuickInfo\", [taskId]);\r\n\t\t\treturn qi.parentNode.removeChild(qi);\r\n\t\t}\r\n\r\n\t\tqi.className += \" gantt_qi_hidden\";\r\n\t\tif (qi.style.right == \"auto\")\r\n\t\t\tqi.style.left = \"-350px\";\r\n\t\telse\r\n\t\t\tqi.style.right = \"-350px\";\r\n\r\n\t\tif (forced) {\r\n\t\t\tqi.style.left = qi.style.right = \"\";\r\n\t\t\tqi.parentNode.removeChild(qi);\r\n\t\t}\r\n\t\tthis.callEvent(\"onAfterQuickInfo\", [taskId]);\r\n\t}\r\n};\r\ngantt.event(window, \"keydown\", function(e){\r\n\tif (e.keyCode == 27)\r\n\t\tgantt.hideQuickInfo();\r\n});\r\n\r\nfunction getContainer() {\r\n\tvar container = gantt.$task_data;\r\n\tif (container && container.offsetHeight && container.offsetWidth) {\r\n\t\treturn {\r\n\t\t\tparent: container,\r\n\t\t\tviewport: gantt.$task\r\n\t\t};\r\n\t}\r\n\tcontainer = gantt.$grid_data;\r\n\tif (container && container.offsetHeight && container.offsetWidth) {\r\n\t\treturn {\r\n\t\t\tparent: container,\r\n\t\t\tviewport: gantt.$grid\r\n\t\t};\r\n\t}\r\n\r\n\treturn {\r\n\t\tparent: gantt.$layout,\r\n\t\tviewport: gantt.$layout\r\n\t};\r\n}\r\n\r\ngantt._show_quick_info = function(pos, offset){\r\n\tvar qi = gantt._quick_info_box;\r\n\tif (gantt.config.quick_info_detached) {\r\n\t\tvar container = getContainer();\r\n\t\tif (!qi.parentNode ||\r\n\t\t\tqi.parentNode.nodeName.toLowerCase() == \"#document-fragment\")//IE8\r\n\t\t\tcontainer.parent.appendChild(qi);\r\n\t\tvar width = qi.offsetWidth;\r\n\t\tvar height = qi.offsetHeight;\r\n\r\n\t\tvar scrolls = gantt.getScrollState();\r\n\t\tvar viewPort = container.viewport;\r\n\t\tvar screenWidth = viewPort.offsetWidth + scrolls.x - width;\r\n\r\n\t\t//pos.dy = (pos.top + height - scrolls.y > (gantt._y - gantt.config.scale_height)*0.96) ? 1 : 0; // uncomment to show QI at the bottom of task always\r\n\r\n\t\tqi.style.left = Math.min(Math.max(scrolls.x, pos.left - pos.dx*(width - pos.width)), screenWidth) + \"px\";\r\n\t\tqi.style.top = pos.top - (pos.dy ? (height + pos.height + 2*offset) : 0) + \"px\";\r\n\t} else {\r\n\t\tqi.style.top = 20 + \"px\";\r\n\t\tif (pos.dx == 1){\r\n\t\t\tqi.style.right = \"auto\";\r\n\t\t\tqi.style.left = \"-300px\";\r\n\r\n\t\t\tsetTimeout(function(){\r\n\t\t\t\tqi.style.left = \"10px\";\r\n\t\t\t},1);\r\n\t\t} else {\r\n\t\t\tqi.style.left = \"auto\";\r\n\t\t\tqi.style.right = \"-300px\";\r\n\r\n\t\t\tsetTimeout(function(){\r\n\t\t\t\tqi.style.right = \"10px\";\r\n\t\t\t},1);\r\n\t\t}\r\n\t\tqi.className += \" gantt_qi_\"+(pos.dx == 1 ? \"left\" : \"right\");\r\n\t\tgantt.$root.appendChild(qi);\r\n\t}\r\n};\r\ngantt._prepare_quick_info_classname = function(id){\r\n\tvar task = gantt.getTask(id);\r\n\r\n\tvar css = \"gantt_cal_quick_info\",\r\n\t\ttemplate = this.templates.quick_info_class(task.start_date, task.end_date, task);\r\n\r\n\tif(template){\r\n\t\tcss += \" \" + template;\r\n\t}\r\n\treturn css;\r\n};\r\n\r\ngantt._init_quick_info = function(pos, id){\r\n\tvar task = gantt.getTask(id);\r\n\tif(typeof this._quick_info_readonly == \"boolean\"){\r\n\t\tif(this.isReadonly(task) !== this._quick_info_readonly){\r\n\t\t\tgantt.hideQuickInfo(true);\r\n\t\t\tthis._quick_info_box = null;\r\n\t\t}\r\n\t}\r\n\r\n\tthis._quick_info_readonly = this.isReadonly(task);\r\n\r\n\tif (!this._quick_info_box){\r\n\t\tvar qi = this._quick_info_box = document.createElement(\"div\");\r\n\r\n\t\tthis._waiAria.quickInfoAttr(qi);\r\n\r\n\r\n\t//title\r\n\t\tvar ariaAttr = gantt._waiAria.quickInfoHeaderAttrString();\r\n\t\tvar html = \"<div class=\\\"gantt_cal_qi_title\\\" \"+ariaAttr+\">\" +\r\n\t\t\t\"<div class=\\\"gantt_cal_qi_tcontent\\\"></div><div  class=\\\"gantt_cal_qi_tdate\\\"></div>\" +\r\n\t\t\t\"</div>\" +\r\n\t\t\t\"<div class=\\\"gantt_cal_qi_content\\\"></div>\";\r\n\r\n\t//buttons\r\n\t\thtml += \"<div class=\\\"gantt_cal_qi_controls\\\">\";\r\n\t\tvar buttons = gantt.config.quickinfo_buttons;\r\n\r\n\t\tvar is_editor = {\"icon_delete\":true,\"icon_edit\":true};\r\n\r\n\t\tfor (var i = 0; i < buttons.length; i++){\r\n\t\t\tif(this._quick_info_readonly && is_editor[buttons[i]])\r\n\t\t\t\tcontinue;\r\n\r\n\t\t\tvar ariaAttr = gantt._waiAria.quickInfoButtonAttrString(gantt.locale.labels[buttons[i]]);\r\n\r\n\t\t\thtml += \"<div class=\\\"gantt_qi_big_icon \"+buttons[i]+\"\\\" title=\\\"\"+gantt.locale.labels[buttons[i]]+\"\\\" \" + ariaAttr +\"><div class='gantt_menu_icon \" + buttons[i] + \"'></div><div>\"+gantt.locale.labels[buttons[i]]+\"</div></div>\";\r\n\t\t}\r\n\t\thtml += \"</div>\";\r\n\r\n\t\tqi.innerHTML = html;\r\n\r\n\t\tvar buttonClick = function(ev){\r\n\t\t\tev = ev || event;\r\n\t\t\tgantt._qi_button_click(ev.target || ev.srcElement);\r\n\t\t};\r\n\r\n\t\tgantt.event(qi, \"click\", buttonClick);\r\n\t\tgantt.event(qi, \"keypress\", function(e){\r\n\t\t\te = e || event;\r\n\t\t\tvar code = e.which||event.keyCode;\r\n\t\t\tif (code == 13 || code == 32){\r\n\t\t\t\tsetTimeout(function(){\r\n\t\t\t\t\tgantt._qi_button_click(e.target || e.srcElement);\r\n\t\t\t\t},1);\r\n\t\t\t}\r\n\t\t});\r\n\t\tif (gantt.config.quick_info_detached) {\r\n\t\t\tvar container = getContainer();\r\n\t\t\tgantt.event(container, \"scroll\", function () { gantt.hideQuickInfo(); });\r\n\t\t}\r\n\t}\r\n\r\n\treturn this._quick_info_box;\r\n};\r\n\r\ngantt._qi_button_click = function(node){\r\n\tvar box = gantt._quick_info_box;\r\n\tif (!node || node == box) return;\r\n\r\n\tvar mask = node.className;\r\n\tif (mask.indexOf(\"_icon\")!=-1){\r\n\t\tvar id = gantt._quick_info_box_id;\r\n\t\tgantt.$click.buttons[mask.split(\" \")[1].replace(\"icon_\",\"\")](id);\r\n\t} else\r\n\t\tgantt._qi_button_click(node.parentNode);\r\n};\r\ngantt._get_event_counter_part = function(id, offset, viewport){\r\n\tvar domEv = gantt.getTaskNode(id);\r\n\tif (!domEv) {\r\n\t\tdomEv = gantt.getTaskRowNode(id);\r\n\t\tif (!domEv) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t}\r\n\tvar left = 0;\r\n\tvar top = offset + domEv.offsetTop + domEv.offsetHeight;\r\n\r\n\tvar node = domEv;\r\n\twhile (node && node !== viewport){\r\n\t\tleft += node.offsetLeft;\r\n\t\tnode = node.offsetParent;\r\n\t}\r\n\r\n\tvar scroll = this.getScrollState();\r\n\r\n\tif(node){\r\n\t\tvar dx = (left + domEv.offsetWidth/2) - scroll.x > (gantt.$container.offsetWidth/2) ? 1 : 0;\r\n\t\tvar dy = (top + domEv.offsetHeight/2) - scroll.y > (gantt.$container.offsetHeight/2) ? 1 : 0;\r\n\r\n\t\treturn { left:left, top:top, dx:dx, dy:dy,\r\n\t\t\twidth:domEv.offsetWidth, height:domEv.offsetHeight };\r\n\t}\r\n\treturn null;\r\n};\r\n\r\ngantt._fill_quick_data  = function(id){\r\n\tvar ev = gantt.getTask(id);\r\n\tvar qi = gantt._quick_info_box;\r\n\r\n\tgantt._quick_info_box_id = id;\r\n\r\n//title content\r\n\r\n\tvar header = {\r\n\t\tcontent: gantt.templates.quick_info_title(ev.start_date, ev.end_date, ev),\r\n\t\tdate: gantt.templates.quick_info_date(ev.start_date, ev.end_date, ev)\r\n\t};\r\n\tvar titleContent = qi.firstChild.firstChild;\r\n\ttitleContent.innerHTML = header.content;\r\n\tvar titleDate = titleContent.nextSibling;\r\n\ttitleDate.innerHTML = header.date;\r\n\r\n\r\n\tgantt._waiAria.quickInfoHeader(qi, [header.content, header.date].join(\" \"));\r\n\r\n//main content\r\n\tvar main = qi.firstChild.nextSibling;\r\n\tmain.innerHTML = gantt.templates.quick_info_content(ev.start_date, ev.end_date, ev);\r\n};\r\n"],"sourceRoot":""}